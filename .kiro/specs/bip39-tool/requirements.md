# 需求文档

## 简介

这是一个基于Vue 3和Element Plus的比特币助记词管理工具，为加密货币用户提供BIP39助记词生成、验证、备份和SLIP39分片转换功能，支持在线使用和离线单HTML文件模式。

## 术语表

- **BIP39**: Bitcoin Improvement Proposal 39，定义了助记词生成和种子派生的标准
- **SLIP39**: Satoshi Labs Improvement Proposal 39，定义了助记词分片备份的标准
- **助记词 (Mnemonic)**: 用于恢复加密货币钱包的单词序列，通常为12或24个单词
- **分片 (Share)**: SLIP39标准中将助记词分割成的多个部分
- **组 (Group)**: SLIP39中的分片组，每个组包含多个分片
- **阈值 (Threshold)**: 恢复助记词所需的最小分片或组数量
- **熵 (Entropy)**: 用于生成助记词的随机数据
- **词表 (Wordlist)**: BIP39标准定义的2048个英文单词列表
- **系统 (System)**: 指本助记词管理工具

## 需求

### 需求 1：BIP39助记词生成

**用户故事：** 作为加密货币用户，我希望生成符合BIP39标准的助记词，以便创建新的钱包。

#### 验收标准

1. WHEN 用户点击"生成助记词"按钮 THEN 系统 SHALL 生成12个或24个符合BIP39标准的随机单词
2. WHEN 助记词生成完成 THEN 系统 SHALL 在列表形式和文本形式两种视图中显示助记词
3. WHEN 助记词生成完成 THEN 系统 SHALL 验证生成的助记词并显示"有效"状态
4. THE 系统 SHALL 使用BIP39标准词表中的2048个英文单词生成助记词
5. THE 系统 SHALL 确保生成的助记词具有足够的熵强度（12词为128位，24词为256位）

### 需求 2：助记词输入与验证

**用户故事：** 作为用户，我希望输入已有的助记词并验证其有效性，以便恢复钱包或进行转换。

#### 验收标准

1. WHEN 用户在输入框中输入字母 THEN 系统 SHALL 过滤并显示匹配的候选单词（最多8个）
2. WHEN 用户按Tab键 THEN 系统 SHALL 在候选单词列表中循环切换选中项
3. WHEN 用户按Enter键且有候选词 THEN 系统 SHALL 将当前选中的候选词添加到助记词列表
4. WHEN 用户按ESC键 THEN 系统 SHALL 清除当前输入框内容
5. WHEN 用户输入的字母前缀在词表中存在 THEN 系统 SHALL 显示绿色勾号图标
6. WHEN 用户输入的字母前缀在词表中不存在 THEN 系统 SHALL 显示红色叉号图标
7. WHEN 用户点击候选词 THEN 系统 SHALL 将该词添加到助记词列表
8. THE 系统 SHALL 只接受BIP39标准词表中的单词
9. THE 系统 SHALL 自动将输入转换为小写字母并过滤非字母字符

### 需求 3：助记词显示与管理

**用户故事：** 作为用户，我希望以多种方式查看和管理助记词，以便于记录和使用。

#### 验收标准

1. WHEN 用户切换到"列表形式"标签 THEN 系统 SHALL 以编号卡片形式显示每个单词
2. WHEN 用户切换到"文本形式"标签 THEN 系统 SHALL 以空格分隔的文本形式显示所有单词
3. WHEN 用户点击"清除列表"按钮 THEN 系统 SHALL 清空所有已输入的助记词
4. WHEN 助记词列表更新 THEN 系统 SHALL 实时验证助记词有效性并更新状态显示
5. THE 系统 SHALL 在界面上显示当前助记词的有效性状态（有效/无效）

### 需求 4：剪贴板操作

**用户故事：** 作为用户，我希望从剪贴板粘贴助记词，以便快速导入已有的助记词。

#### 验收标准

1. WHEN 用户点击"从剪切板粘贴"按钮 THEN 系统 SHALL 读取剪贴板内容
2. WHEN 剪贴板内容包含正确数量的单词 THEN 系统 SHALL 将单词填充到助记词列表
3. WHEN 剪贴板内容的单词数量不正确 THEN 系统 SHALL 拒绝粘贴操作
4. WHEN 剪贴板内容包含不在词表中的单词 THEN 系统 SHALL 拒绝粘贴操作
5. WHEN 粘贴操作成功 THEN 系统 SHALL 验证助记词有效性并更新显示

### 需求 5：BIP39转SLIP39分片

**用户故事：** 作为用户，我希望将BIP39助记词转换为SLIP39分片，以便实现更安全的备份方案。

#### 验收标准

1. WHEN 用户点击"转换为SLIP39"按钮且助记词有效 THEN 系统 SHALL 切换到SLIP39工具页面
2. WHEN 切换到SLIP39页面 THEN 系统 SHALL 自动填充BIP39助记词到输入框
3. WHEN BIP39助记词填充完成 THEN 系统 SHALL 自动触发分片生成流程
4. WHEN 助记词无效 THEN 系统 SHALL 禁用"转换为SLIP39"按钮
5. THE 系统 SHALL 保持BIP39助记词在组件间传递时的完整性

### 需求 6：SLIP39分片生成

**用户故事：** 作为用户，我希望生成SLIP39分片，以便将助记词分散存储提高安全性。

#### 验收标准

1. WHEN 用户输入BIP39助记词并点击"生成分片" THEN 系统 SHALL 将助记词转换为熵
2. WHEN 熵转换成功 THEN 系统 SHALL 根据组配置生成SLIP39分片
3. WHEN 用户设置密码 THEN 系统 SHALL 使用密码加密生成的分片
4. WHEN 用户配置组阈值 THEN 系统 SHALL 确保至少需要该数量的组才能恢复助记词
5. WHEN 用户配置每个组的阈值和分片数 THEN 系统 SHALL 生成相应数量的分片
6. WHEN 分片生成成功 THEN 系统 SHALL 显示所有生成的分片文本
7. WHEN 分片生成失败 THEN 系统 SHALL 显示错误信息
8. THE 系统 SHALL 支持1到16个组的配置
9. THE 系统 SHALL 确保每个组的分片数不少于该组的阈值

### 需求 7：SLIP39分片恢复

**用户故事：** 作为用户，我希望使用SLIP39分片恢复原始助记词，以便在需要时访问钱包。

#### 验收标准

1. WHEN 用户输入足够数量的分片并点击"恢复助记词" THEN 系统 SHALL 从分片中恢复熵
2. WHEN 熵恢复成功 THEN 系统 SHALL 将熵转换为BIP39助记词
3. WHEN 分片使用了密码加密 THEN 系统 SHALL 要求用户输入相同的密码才能恢复
4. WHEN 输入的分片数量不足 THEN 系统 SHALL 显示恢复失败错误
5. WHEN 输入的分片无效 THEN 系统 SHALL 显示恢复失败错误
6. WHEN 恢复成功 THEN 系统 SHALL 在文本框中显示恢复的BIP39助记词
7. THE 系统 SHALL 支持动态添加和删除分片输入框

### 需求 8：分片测试功能

**用户故事：** 作为用户，我希望快速测试生成的分片是否能正确恢复，以便验证备份的有效性。

#### 验收标准

1. WHEN 用户点击"跳转到还原测试"按钮 THEN 系统 SHALL 切换到"恢复助记词"标签页
2. WHEN 切换到恢复标签页 THEN 系统 SHALL 自动填充满足阈值要求的分片到输入框
3. WHEN 自动填充分片 THEN 系统 SHALL 从每个组中选择一个分片
4. WHEN 自动填充分片 THEN 系统 SHALL 确保选择的组数量等于组阈值
5. THE 系统 SHALL 保持密码设置在生成和恢复之间的一致性

### 需求 9：单文件应用构建

**用户故事：** 作为注重安全的用户，我希望构建并下载单HTML文件在离线环境使用，以便避免网络安全风险。

#### 验收标准

1. WHEN 开发者运行构建命令 THEN 系统 SHALL 生成包含所有依赖的单个HTML文件
2. WHEN 单HTML文件生成 THEN 系统 SHALL 将所有JavaScript代码内联到HTML中
3. WHEN 单HTML文件生成 THEN 系统 SHALL 将所有CSS样式内联到HTML中
4. WHEN 单HTML文件生成 THEN 系统 SHALL 包含所有必需的polyfills（Buffer、crypto等）
5. WHEN 用户在浏览器中打开单HTML文件 THEN 系统 SHALL 在完全离线环境下正常运行
6. WHEN 用户在离线环境使用 THEN 系统 SHALL 提供与在线版本相同的所有功能
7. THE 系统 SHALL 使用vite-plugin-singlefile插件生成单文件
8. THE 系统 SHALL 确保单文件大小在合理范围内（< 5MB）
9. THE 系统 SHALL 在单文件中包含bip39和slip39库的完整功能

### 需求 10：在线版本下载功能

**用户故事：** 作为用户，我希望从在线版本下载单HTML文件，以便在离线环境使用。

#### 验收标准

1. WHEN 用户访问在线版本 THEN 系统 SHALL 显示"在线版本"标签
2. WHEN 用户访问单HTML文件版本 THEN 系统 SHALL 显示"单HTML文件版本"标签
3. WHEN 用户在在线版本点击"单HTML文件"按钮 THEN 系统 SHALL 下载独立的HTML文件
4. WHEN 下载完成 THEN 系统 SHALL 将文件命名为"BIP39-TOOL-Single.html"
5. THE 系统 SHALL 通过检测URL路径判断当前运行模式
6. THE 系统 SHALL 在单文件模式下隐藏下载按钮

### 需求 11：用户界面导航

**用户故事：** 作为用户，我希望在BIP39和SLIP39工具之间轻松切换，以便根据需要使用不同功能。

#### 验收标准

1. WHEN 用户点击"BIP39 助记词工具"菜单项 THEN 系统 SHALL 显示BIP39工具界面
2. WHEN 用户点击"SLIP39 分片工具"菜单项 THEN 系统 SHALL 显示SLIP39工具界面
3. WHEN 切换工具 THEN 系统 SHALL 保持当前工具的状态不变
4. THE 系统 SHALL 在顶部显示水平导航菜单
5. THE 系统 SHALL 高亮显示当前激活的工具菜单项

### 需求 11：用户界面导航

**用户故事：** 作为用户，我希望在BIP39和SLIP39工具之间轻松切换，以便根据需要使用不同功能。

#### 验收标准

1. WHEN 用户点击"BIP39 助记词工具"菜单项 THEN 系统 SHALL 显示BIP39工具界面
2. WHEN 用户点击"SLIP39 分片工具"菜单项 THEN 系统 SHALL 显示SLIP39工具界面
3. WHEN 切换工具 THEN 系统 SHALL 保持当前工具的状态不变
4. THE 系统 SHALL 在顶部显示水平导航菜单
5. THE 系统 SHALL 高亮显示当前激活的工具菜单项

### 需求 12：组配置管理

**用户故事：** 作为用户，我希望灵活配置SLIP39分片的组结构，以便满足不同的安全需求。

#### 验收标准

1. WHEN 用户点击"添加组"按钮 THEN 系统 SHALL 在组列表中添加新的组配置
2. WHEN 用户点击"删除"按钮 THEN 系统 SHALL 从组列表中移除该组配置
3. WHEN 组数量为1 THEN 系统 SHALL 禁用所有"删除"按钮
4. WHEN 用户修改组阈值 THEN 系统 SHALL 确保阈值在1到组数量之间
5. WHEN 用户修改组内分片数 THEN 系统 SHALL 确保分片数不小于该组阈值
6. THE 系统 SHALL 为每个组显示阈值和分片数的输入控件
7. THE 系统 SHALL 限制每个组的分片数最多为10个

### 需求 12：组配置管理

**用户故事：** 作为用户，我希望灵活配置SLIP39分片的组结构，以便满足不同的安全需求。

#### 验收标准

1. WHEN 用户点击"添加组"按钮 THEN 系统 SHALL 在组列表中添加新的组配置
2. WHEN 用户点击"删除"按钮 THEN 系统 SHALL 从组列表中移除该组配置
3. WHEN 组数量为1 THEN 系统 SHALL 禁用所有"删除"按钮
4. WHEN 用户修改组阈值 THEN 系统 SHALL 确保阈值在1到组数量之间
5. WHEN 用户修改组内分片数 THEN 系统 SHALL 确保分片数不小于该组阈值
6. THE 系统 SHALL 为每个组显示阈值和分片数的输入控件
7. THE 系统 SHALL 限制每个组的分片数最多为10个

## 非功能需求

### 需求 13：性能要求

**用户故事：** 作为用户，我希望工具响应迅速，以便高效完成操作。

#### 验收标准

1. WHEN 用户执行任何操作 THEN 系统 SHALL 在1秒内完成响应
2. WHEN 生成助记词或分片 THEN 系统 SHALL 在500毫秒内完成
3. THE 系统 SHALL 在低配置设备上流畅运行

### 需求 13：性能要求

**用户故事：** 作为用户，我希望工具响应迅速，以便高效完成操作。

#### 验收标准

1. WHEN 用户执行任何操作 THEN 系统 SHALL 在1秒内完成响应
2. WHEN 生成助记词或分片 THEN 系统 SHALL 在500毫秒内完成
3. THE 系统 SHALL 在低配置设备上流畅运行
4. THE 系统 SHALL 确保单HTML文件加载时间在3秒内（普通网络）

### 需求 14：安全要求

**用户故事：** 作为用户，我希望工具不会泄露我的助记词，以便保护资产安全。

#### 验收标准

1. THE 系统 SHALL 在本地浏览器中执行所有加密操作
2. THE 系统 SHALL 不向任何服务器发送助记词或分片数据
3. THE 系统 SHALL 使用经过验证的加密库（bip39、slip39）
4. THE 系统 SHALL 在单HTML文件模式下完全离线运行

### 需求 14：安全要求

**用户故事：** 作为用户，我希望工具不会泄露我的助记词，以便保护资产安全。

#### 验收标准

1. THE 系统 SHALL 在本地浏览器中执行所有加密操作
2. THE 系统 SHALL 不向任何服务器发送助记词或分片数据
3. THE 系统 SHALL 使用经过验证的加密库（bip39、slip39）
4. THE 系统 SHALL 在单HTML文件模式下完全离线运行
5. THE 系统 SHALL 不在生产环境的控制台输出敏感信息

### 需求 15：兼容性要求

**用户故事：** 作为用户，我希望工具在不同浏览器和设备上都能使用，以便灵活访问。

#### 验收标准

1. THE 系统 SHALL 支持Chrome、Firefox、Safari、Edge等主流浏览器
2. THE 系统 SHALL 支持桌面和移动设备
3. THE 系统 SHALL 使用响应式设计适配不同屏幕尺寸
4. THE 系统 SHALL 在单HTML文件中包含所有必要的polyfills以确保浏览器兼容性

### 需求 16：构建和部署要求

**用户故事：** 作为开发者，我希望有清晰的构建和部署流程，以便维护和发布应用。

#### 验收标准

1. THE 系统 SHALL 提供构建命令生成生产版本
2. THE 系统 SHALL 提供单独的命令构建单HTML文件版本
3. THE 系统 SHALL 在构建时优化代码大小和性能
4. THE 系统 SHALL 支持通过GitHub Pages或类似服务部署在线版本
5. THE 系统 SHALL 在构建输出中包含版本信息和构建时间
